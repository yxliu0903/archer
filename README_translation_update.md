# Archer - Delta Net 树结构可视化更新

## 🆕 最新更新

### 1. 节点样式优化
- ✅ **去掉白边**: 移除了所有圆形节点的白色边框
- ✅ **隐藏索引**: 不再在节点内显示数字索引
- ✅ **简洁美观**: 节点现在更加简洁，视觉效果更佳

### 2. 豆包API翻译功能
- ✅ **自动翻译**: 点击节点时自动翻译英文内容为中文
- ✅ **双语对照**: 中文翻译在上，英文原文在下
- ✅ **智能缓存**: 翻译结果缓存1小时，提高效率
- ✅ **错误处理**: 翻译失败时显示原文，不影响使用

## 🚀 快速启动

### 方法1: 使用启动脚本
```bash
chmod +x start_streamlit_with_translation.sh
./start_streamlit_with_translation.sh
```

### 方法2: 手动启动
```bash
# 设置API密钥
export ARK_API_KEY="7955573a-a3dd-4c9f-93bf-5bb24fdba252"

# 安装依赖
pip install -r requirements.txt

# 启动应用 (注意端口8502)
streamlit run streamlit_app.py --server.port=8502
```

## 📋 功能对比

| 功能 | 更新前 | 更新后 |
|------|--------|--------|
| 节点边框 | ✅ 有白色边框 | ❌ 无边框 |
| 节点索引 | ✅ 显示数字 | ❌ 隐藏数字 |
| 翻译功能 | ❌ 无 | ✅ 自动翻译 |
| 双语显示 | ❌ 仅英文 | ✅ 中英对照 |
| 缓存机制 | ❌ 无 | ✅ 1小时缓存 |

## 🎯 使用说明

### 树形图交互
1. **点击节点**: 自动翻译并显示详细信息
2. **拖拽**: 移动视图查看不同区域
3. **缩放**: 鼠标滚轮或工具栏缩放
4. **颜色**: 节点颜色表示评分高低

### 翻译体验
- 🌐 **即点即译**: 点击任意节点立即开始翻译
- ⚡ **快速响应**: 通常1-2秒内完成翻译
- 🎨 **视觉区分**: 中文用蓝色背景，英文用灰色背景
- 💾 **智能缓存**: 相同内容不重复翻译

## 🔧 技术细节

### 新增依赖
- `openai>=1.0.0` - 豆包API客户端

### API配置
- **模型**: `doubao-1-5-pro-32k-250115`
- **温度**: 0.3 (保证翻译稳定性)
- **最大令牌**: 1000

### 端口说明
- **Archer版本**: 8502
- **Tree_visual版本**: 8501

## 🐛 故障排除

### 常见问题
1. **翻译不工作**: 检查网络连接和API密钥
2. **节点点击无响应**: 确保点击在圆圈上
3. **加载缓慢**: 首次翻译需要时间，后续会很快

### 调试建议
- 查看控制台错误信息
- 确认依赖正确安装
- 检查API密钥有效性

## 📞 支持

如有问题，请检查：
1. 依赖包是否完整安装
2. 网络连接是否正常
3. API密钥是否正确设置 